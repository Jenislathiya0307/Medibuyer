import{r as j,j as e,m as w}from"./index-n5lagw8Y.js";import{T as u,a as N}from"./index-oK-4kqbo.js";import{I as h}from"./iconify-VfOFnMl8.js";import{B as g}from"./Button-BChG-RMT.js";import{T as f}from"./TextInput-BqV0c51w.js";import{T,a as k,b as i,c as C,d as v,e as n}from"./TableRow-DNxHhbic.js";import{A as y}from"./Avatar-CQP_chTq.js";import{B as S}from"./Badge-zDQe1ecK.js";import{T as B}from"./Tooltip-CDCKvG7n.js";import{f as L}from"./format-Ci4P0HhW.js";import{C as A}from"./CardBox-DP5V6wyZ.js";import{B as I}from"./BreadcrumbComp-BUvza-Rs.js";import"./globalFetcher-ChilYVpY.js";import"./index-DAr7p5OD.js";import"./resolve-theme-BrLp9Ogr.js";import"./floating-ui.react-DP-UpT2K.js";import"./use-floating-DQGwidr_.js";import"./en-US-Bi_cwWVL.js";import"./toDate-qY-Vit60.js";import"./chevron-right-icon-BGQVsHY5.js";const P=()=>{const{tickets:r,setFilter:l}=j.useContext(u),d=r.filter(a=>a.Status==="Pending").length,m=r.filter(a=>a.Status==="Open").length,x=r.filter(a=>a.Status==="Closed").length;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-3 md:col-span-6  col-span-12",children:e.jsxs("div",{className:"p-[30px] bg-lightprimary dark:bg-lightprimary text-center rounded-md cursor-pointer",onClick:()=>l("total_tickets"),children:[e.jsx("h3",{className:"text-primary text-2xl",children:r.length}),e.jsx("h6",{className:"text-base text-primary",children:"Total Tickets"})]})}),e.jsx("div",{className:"lg:col-span-3 md:col-span-6  col-span-12",children:e.jsxs("div",{className:"p-[30px] bg-lightwarning dark:bg-lightwarning text-center rounded-md cursor-pointer",onClick:()=>l("Pending"),children:[e.jsx("h3",{className:"text-warning text-2xl",children:d}),e.jsx("h6",{className:"text-base text-warning",children:"Pending Tickets"})]})}),e.jsx("div",{className:"lg:col-span-3 md:col-span-6  col-span-12",children:e.jsxs("div",{className:"p-[30px] bg-lightsuccess dark:bg-lightsuccess text-center rounded-md cursor-pointer",onClick:()=>l("Open"),children:[e.jsx("h3",{className:"text-success text-2xl",children:m}),e.jsx("h6",{className:"text-base text-success",children:"Open Tickets"})]})}),e.jsx("div",{className:"lg:col-span-3 md:col-span-6  col-span-12",children:e.jsxs("div",{className:"p-[30px] bg-lighterror dark:bg-lighterror text-center rounded-md cursor-pointer",onClick:()=>l("Closed"),children:[e.jsx("h3",{className:"text-error text-2xl",children:x}),e.jsx("h6",{className:"text-base text-error",children:"Closed Tickets"})]})})]})})},F=()=>{const{tickets:r,deleteTicket:l,searchTickets:d,ticketSearch:m,filter:x}=j.useContext(u),a=w(),b=((s,p,o)=>{switch(p){case"total_tickets":return s.filter(t=>!t.deleted&&t.ticketTitle.toLocaleLowerCase().includes(o));case"Pending":return s.filter(t=>!t.deleted&&t.Status==="Pending"&&t.ticketTitle.toLocaleLowerCase().includes(o));case"Closed":return s.filter(t=>!t.deleted&&t.Status==="Closed"&&t.ticketTitle.toLocaleLowerCase().includes(o));case"Open":return s.filter(t=>!t.deleted&&t.Status==="Open"&&t.ticketTitle.toLocaleLowerCase().includes(o));default:throw new Error(`Unknown filter: ${p}`)}})(r,x,m.toLowerCase()),c=s=>s.Status==="Open"?"success":s.Status==="Closed"?"error":s.Status==="Pending"?"warning":(s.Status==="Moderate","primary");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"my-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 lg:flex-nowrap flex-wrap lg:gap-0 gap-3",children:[e.jsx(g,{onClick:()=>a("/apps/tickets/create"),color:"primary",children:"Create Ticket"}),e.jsx(f,{type:"text",sizing:"md",className:"form-control sm:max-w-60 max-w-full w-full",onChange:s=>d(s.target.value),placeholder:"Search",icon:()=>e.jsx(h,{icon:"solar:magnifer-line-duotone",height:18})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(T,{children:[e.jsxs(k,{children:[e.jsx(i,{className:"text-base font-semibold py-3 whitespace-nowrap",children:"Id"}),e.jsx(i,{className:"text-base font-semibold py-3 whitespace-nowrap",children:"Ticket"}),e.jsx(i,{className:"text-base font-semibold py-3 whitespace-nowrap",children:"Assigned To"}),e.jsx(i,{className:"text-base font-semibold py-3 whitespace-nowrap",children:"Status"}),e.jsx(i,{className:"text-base font-semibold py-3 whitespace-nowrap",children:"Date"}),e.jsx(i,{className:"text-base font-semibold py-3 text-end",children:"Action"})]}),e.jsx(C,{className:"divide-y divide-border dark:divide-darkborder",children:b.map(s=>e.jsxs(v,{children:[e.jsx(n,{className:"whitespace-nowrap",children:s.Id}),e.jsxs(n,{className:"max-w-md",children:[e.jsx("h6",{className:"text-base truncate line-clamp-1",children:s.ticketTitle}),e.jsx("p",{className:"text-sm text-darklink dark:text-bodytext truncate line-clamp-1 text-wrap sm:max-w-56",children:s.ticketDescription})]}),e.jsx(n,{className:"whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{children:e.jsx(y,{img:s.thumb,alt:s.AgentName,rounded:!0})}),e.jsxs("h6",{className:"text-base",children:[" ",s.AgentName]})]})}),e.jsx(n,{className:"whitespace-nowrap",children:e.jsx(S,{className:`bg-light${c(s)}  dark:bg-dark${c(s)} text-${c(s)} dark:text-${c(s)}`,children:s.Status})}),e.jsx(n,{className:"whitespace-nowrap",children:e.jsx("p",{className:"text-sm text-darklink dark:text-bodytext",children:L(new Date(s.Date),"E, MMM d")})}),e.jsx(n,{children:e.jsx(B,{content:"Delete Ticket",placement:"bottom",arrow:!1,children:e.jsx(g,{className:"btn-circle ms-auto",color:"transparent",children:e.jsx(h,{icon:"solar:trash-bin-minimalistic-outline",height:"18",onClick:()=>l(s.Id)})})})})]},s.Id))})]})})]})})},O=()=>e.jsx(e.Fragment,{children:e.jsx(N,{children:e.jsxs(A,{children:[e.jsx(P,{}),e.jsx(F,{})]})})}),D=[{to:"/",title:"Home"},{title:"Tickets"}],ae=()=>e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Tickets App",items:D}),e.jsx(O,{})]});export{ae as default};
