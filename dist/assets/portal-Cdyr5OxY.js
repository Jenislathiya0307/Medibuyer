import{r as u,R as E,y as F}from"./index-n5lagw8Y.js";import{b as $,s as P,u as G,o as v,n as Y,c as k,t as q,Y as M,K as T,p as J}from"./render-D9E-06xR.js";import{n as K,i as b,u as Q,r as Z,l as ee}from"./dom-BlW_0b_t.js";import{H as te,I as re}from"./focus-management-Ds-lPg9b.js";import{w as ne}from"./with-selector-uup4H7fL.js";import{l as oe,r as se}from"./owner-CneWfzVc.js";import{y as L,T as le}from"./use-sync-refs-CefhOWeT.js";let N=class extends Map{constructor(t){super(),this.factory=t}get(t){let r=super.get(t);return r===void 0&&(r=this.factory(t),this.set(t,r)),r}};var ie=Object.defineProperty,ae=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ue=(e,t,r)=>(ae(e,t+"",r),r),B=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},f=(e,t,r)=>(B(e,t,"read from private field"),r?r.call(e):t.get(e)),x=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},R=(e,t,r,n)=>(B(e,t,"write to private field"),t.set(e,r),r),p,w,y;class ce{constructor(t){x(this,p,{}),x(this,w,new N(()=>new Set)),x(this,y,new Set),ue(this,"disposables",$()),R(this,p,t),P.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return f(this,p)}subscribe(t,r){if(P.isServer)return()=>{};let n={selector:t,callback:r,current:t(f(this,p))};return f(this,y).add(n),this.disposables.add(()=>{f(this,y).delete(n)})}on(t,r){return P.isServer?()=>{}:(f(this,w).get(t).add(r),this.disposables.add(()=>{f(this,w).get(t).delete(r)}))}send(t){let r=this.reduce(f(this,p),t);if(r!==f(this,p)){R(this,p,r);for(let n of f(this,y)){let o=n.selector(f(this,p));H(n.current,o)||(n.current=o,n.callback(o))}for(let n of f(this,w).get(t.type))n(f(this,p),t)}}}p=new WeakMap,w=new WeakMap,y=new WeakMap;function H(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:O(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:O(e.entries(),t.entries()):j(e)&&j(t)?O(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function O(e,t){do{let r=e.next(),n=t.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function j(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}function Xe(e){let[t,r]=e(),n=$();return(...o)=>{t(...o),n.dispose(),n.microTask(r)}}var de=Object.defineProperty,fe=(e,t,r)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,W=(e,t,r)=>(fe(e,typeof t!="symbol"?t+"":t,r),r),pe=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(pe||{});let he={0(e,t){let r=t.id,n=e.stack,o=e.stack.indexOf(r);if(o!==-1){let s=e.stack.slice();return s.splice(o,1),s.push(r),n=s,{...e,stack:n}}return{...e,stack:[...e.stack,r]}},1(e,t){let r=t.id,n=e.stack.indexOf(r);if(n===-1)return e;let o=e.stack.slice();return o.splice(n,1),{...e,stack:o}}},me=class z extends ce{constructor(){super(...arguments),W(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),W(this,"selectors",{isTop:(t,r)=>t.stack[t.stack.length-1]===r,inStack:(t,r)=>t.stack.includes(r)})}static new(){return new z({stack:[]})}reduce(t,r){return G(r.type,he,t,r)}};const ve=new N(()=>me.new());function ge(e,t,r=H){return ne.useSyncExternalStoreWithSelector(v(n=>e.subscribe(be,n)),v(()=>e.state),v(()=>e.state),v(t),r)}function be(e){return e}function we(e,t){let r=u.useId(),n=ve.get(t),[o,s]=ge(n,u.useCallback(i=>[n.selectors.isTop(i,r),n.selectors.inStack(i,r)],[n,r]));return Y(()=>{if(e)return n.actions.push(r),()=>n.actions.pop(r)},[n,e,r]),e?s?o:!0:!1}function Fe(e,t,r){let n=k(o=>{let s=o.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&r()});u.useEffect(()=>{if(!e)return;let o=t===null?null:K(t)?t:t.current;if(!o)return;let s=$();if(typeof ResizeObserver<"u"){let i=new ResizeObserver(()=>n.current(o));i.observe(o),s.add(()=>i.disconnect())}if(typeof IntersectionObserver<"u"){let i=new IntersectionObserver(()=>n.current(o));i.observe(o),s.add(()=>i.disconnect())}return()=>s.dispose()},[t,n,e])}function V(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ye(){return/Android/gi.test(window.navigator.userAgent)}function A(){return V()||ye()}function S(e,t,r,n){let o=k(r);u.useEffect(()=>{if(!e)return;function s(i){o.current(i)}return document.addEventListener(t,s,n),()=>document.removeEventListener(t,s,n)},[e,t,n])}function Ee(e,t,r,n){let o=k(r);u.useEffect(()=>{if(!e)return;function s(i){o.current(i)}return window.addEventListener(t,s,n),()=>window.removeEventListener(t,s,n)},[e,t,n])}const I=30;function Ge(e,t,r){let n=k(r),o=u.useCallback(function(l,a){if(l.defaultPrevented)return;let c=a(l);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let h=(function m(d){return typeof d=="function"?m(d()):Array.isArray(d)||d instanceof Set?d:[d]})(t);for(let m of h)if(m!==null&&(m.contains(c)||l.composed&&l.composedPath().includes(m)))return;return!te(c,re.Loose)&&c.tabIndex!==-1&&l.preventDefault(),n.current(l,c)},[n,t]),s=u.useRef(null);S(e,"pointerdown",l=>{var a,c;A()||(s.current=((c=(a=l.composedPath)==null?void 0:a.call(l))==null?void 0:c[0])||l.target)},!0),S(e,"pointerup",l=>{if(A()||!s.current)return;let a=s.current;return s.current=null,o(l,()=>a)},!0);let i=u.useRef({x:0,y:0});S(e,"touchstart",l=>{i.current.x=l.touches[0].clientX,i.current.y=l.touches[0].clientY},!0),S(e,"touchend",l=>{let a={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(a.x-i.current.x)>=I||Math.abs(a.y-i.current.y)>=I))return o(l,()=>b(l.target)?l.target:null)},!0),Ee(e,"blur",l=>o(l,()=>Q(window.document.activeElement)?window.document.activeElement:null),!0)}function $e(...e){return u.useMemo(()=>oe(...e),[...e])}function qe(...e){return u.useMemo(()=>se(...e),[...e])}function Se(e){return u.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Pe(e,t){let r=e(),n=new Set;return{getSnapshot(){return r},subscribe(o){return n.add(o),()=>n.delete(o)},dispatch(o,...s){let i=t[o].call(r,...s);i&&(r=i,n.forEach(l=>l()))}}}function ke(){let e;return{before({doc:t}){var r;let n=t.documentElement,o=(r=t.defaultView)!=null?r:window;e=Math.max(0,o.innerWidth-n.clientWidth)},after({doc:t,d:r}){let n=t.documentElement,o=Math.max(0,n.clientWidth-n.offsetWidth),s=Math.max(0,e-o);r.style(n,"paddingRight",`${s}px`)}}}function xe(){return V()?{before({doc:e,d:t,meta:r}){function n(o){for(let s of r().containers)for(let i of s())if(i.contains(o))return!0;return!1}t.microTask(()=>{var o;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=$();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let s=(o=window.scrollY)!=null?o:window.pageYOffset,i=null;t.addEventListener(e,"click",l=>{if(b(l.target))try{let a=l.target.closest("a");if(!a)return;let{hash:c}=new URL(a.href),h=e.querySelector(c);b(h)&&!n(h)&&(i=h)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",a=>{if(l.dispose(),b(a.target)&&Z(a.target))if(n(a.target)){let c=a.target;for(;c.parentElement&&n(c.parentElement);)c=c.parentElement;l.style(c,"overscrollBehavior","contain")}else l.style(a.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(b(l.target)){if(ee(l.target))return;if(n(l.target)){let a=l.target;for(;a.parentElement&&a.dataset.headlessuiPortal!==""&&!(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth);)a=a.parentElement;a.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let a=(l=window.scrollY)!=null?l:window.pageYOffset;s!==a&&window.scrollTo(0,s),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function Oe(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function D(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let g=Pe(()=>new Map,{PUSH(e,t){var r;let n=(r=this.get(e))!=null?r:{doc:e,count:0,d:$(),meta:new Set,computedMeta:{}};return n.count++,n.meta.add(t),n.computedMeta=D(n.meta),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t),r.computedMeta=D(r.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},r=[xe(),ke(),Oe()];r.forEach(({before:n})=>n?.(t)),r.forEach(({after:n})=>n?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});g.subscribe(()=>{let e=g.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let n=t.get(r.doc)==="hidden",o=r.count!==0;(o&&!n||!o&&n)&&g.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&g.dispatch("TEARDOWN",r)}});function Ce(e,t,r=()=>({containers:[]})){let n=Se(g),o=t?n.get(t):void 0,s=o?o.count>0:!1;return Y(()=>{if(!(!t||!e))return g.dispatch("PUSH",t,r),()=>g.dispatch("POP",t,r)},[e,t]),s}function Je(e,t,r=()=>[document.body]){let n=we(e,"scroll-lock");Ce(n,t,o=>{var s;return{containers:[...(s=o.containers)!=null?s:[],r]}})}function Me(e){let t=v(e),r=u.useRef(!1);u.useEffect(()=>(r.current=!1,()=>{r.current=!0,q(()=>{r.current&&t()})}),[t])}let _=u.createContext(!1);function Te(){return u.useContext(_)}function Ke(e){return E.createElement(_.Provider,{value:e.force},e.children)}function Le(e){let t=Te(),r=u.useContext(X),[n,o]=u.useState(()=>{var s;if(!t&&r!==null)return(s=r.current)!=null?s:null;if(P.isServer)return null;let i=e?.getElementById("headlessui-portal-root");if(i)return i;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return u.useEffect(()=>{n!==null&&(e!=null&&e.body.contains(n)||e==null||e.body.appendChild(n))},[n,e]),u.useEffect(()=>{t||r!==null&&o(r.current)},[r,o,t]),n}let U=u.Fragment,Re=M(function(e,t){let{ownerDocument:r=null,...n}=e,o=u.useRef(null),s=L(le(d=>{o.current=d}),t),i=$e(o.current),l=r??i,a=Le(l),c=u.useContext(C),h=J(),m=T();return Me(()=>{var d;a&&a.childNodes.length<=0&&((d=a.parentElement)==null||d.removeChild(a))}),a?F.createPortal(E.createElement("div",{"data-headlessui-portal":"",ref:d=>{h.dispose(),c&&d&&h.add(c.register(d))}},m({ourProps:{ref:s},theirProps:n,slot:{},defaultTag:U,name:"Portal"})),a):null});function je(e,t){let r=L(t),{enabled:n=!0,ownerDocument:o,...s}=e,i=T();return n?E.createElement(Re,{...s,ownerDocument:o,ref:r}):i({ourProps:{ref:r},theirProps:s,slot:{},defaultTag:U,name:"Portal"})}let We=u.Fragment,X=u.createContext(null);function Ae(e,t){let{target:r,...n}=e,o={ref:L(t)},s=T();return E.createElement(X.Provider,{value:r},s({ourProps:o,theirProps:n,defaultTag:We,name:"Popover.Group"}))}let C=u.createContext(null);function Qe(){let e=u.useContext(C),t=u.useRef([]),r=v(s=>(t.current.push(s),e&&e.register(s),()=>n(s))),n=v(s=>{let i=t.current.indexOf(s);i!==-1&&t.current.splice(i,1),e&&e.unregister(s)}),o=u.useMemo(()=>({register:r,unregister:n,portals:t}),[r,n,t]);return[t,u.useMemo(()=>function({children:s}){return E.createElement(C.Provider,{value:o},s)},[o])]}let Ie=M(je),De=M(Ae),Ze=Object.assign(Ie,{Group:De});export{we as I,ge as S,ce as T,De as X,Xe as a,pe as b,Me as c,qe as d,Qe as e,Je as f,S as i,Ge as k,Ke as l,A as n,Fe as p,Ee as s,Ze as t,$e as u,ve as x};
