import{r as j,m as k,j as e}from"./index-n5lagw8Y.js";import{I as B,a as E}from"./index-Cew-Mpd-.js";import{I as f}from"./iconify-VfOFnMl8.js";import{i as O,f as M}from"./format-Ci4P0HhW.js";import{L as p}from"./Label-fniU0OUx.js";import{T as c}from"./TextInput-BqV0c51w.js";import{S as U}from"./Select-Dhx4EgIQ.js";import{T as H,a as L,b as d,c as R,d as V,e as m}from"./TableRow-DNxHhbic.js";import{T as w}from"./Tooltip-CDCKvG7n.js";import{B as b}from"./Button-BChG-RMT.js";import{A as G}from"./Alert-gpJFEXQ7.js";import{C as _}from"./CardBox-DP5V6wyZ.js";import{B as $}from"./BreadcrumbComp-BUvza-Rs.js";import"./globalFetcher-ChilYVpY.js";import"./index-DAr7p5OD.js";import"./en-US-Bi_cwWVL.js";import"./toDate-qY-Vit60.js";import"./resolve-theme-BrLp9Ogr.js";import"./floating-ui.react-DP-UpT2K.js";import"./use-floating-DQGwidr_.js";import"./x-icon-6miUmzgF.js";import"./chevron-right-icon-BGQVsHY5.js";function q(){const{addInvoice:T,invoices:x}=j.useContext(B),[y,g]=j.useState(!1),N=k(),[t,n]=j.useState({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]});j.useEffect(()=>{if(x.length>0){const l=x[x.length-1].id;n(s=>({...s,id:l+1}))}else n(l=>({...l,id:1}))},[x]);const u=l=>{let s=0,a=0;l.forEach(o=>{const D=parseFloat(o.unitPrice)||0,S=parseInt(o.units)||0;a=D*S,s+=a,o.unitTotalPrice=a});const i=s*.1,r=s+i;return{subtotal:s,vat:i,grandTotal:r,totalCost:a}},h=l=>{const{name:s,value:a}=l.target;n(i=>{const r={...i,[s]:a},o=u(r.orders);return{...r,...o}})},v=(l,s,a)=>{n(i=>{const r=[...i.orders];r[l]={...r[l],[s]:a};const o=u(r);return{...i,orders:r,...o}})},C=()=>{n(l=>{const s=[...l.orders,{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],a=u(s);return{...l,orders:s,...a}})},I=l=>{n(s=>{const a=s.orders.filter((r,o)=>o!==l),i=u(a);return{...s,orders:a,...i}})},A=async l=>{l.preventDefault();try{console.log("mera putra",t),await T(t),n({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]}),g(!0),setTimeout(()=>{g(!1)},5e3),N("/apps/invoice/list")}catch(s){console.error("Error adding invoice:",s)}},F=O(new Date(t.date))?new Date(t.date):new Date,P=M(F,"EEEE, MMMM dd, yyyy");return e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl mb-6",children:"Add New Invoice Details"}),e.jsxs("p",{children:["ID: ",t.id]}),e.jsxs("p",{children:["Date: ",P]}),e.jsxs("form",{children:[e.jsx("div",{className:"bg-lightgray dark:bg-gray-800/70 p-6 my-6 rounded-md",children:e.jsxs("div",{className:"grid grid-cols-12 lg:gap-y-6 lg:gap-x-6 gap-y-6 gap-x-0",children:[e.jsxs("div",{className:"lg:col-span-6 md:col-span-6 col-span-12",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(p,{htmlFor:"billFrom",children:"Bill From"})}),e.jsx(c,{id:"billFrom",name:"billFrom",value:t.billFrom,onChange:h,type:"text",className:"form-control"})]}),e.jsxs("div",{className:"lg:col-span-6 md:col-span-6 col-span-12",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(p,{htmlFor:"billTo",children:"Bill To"})}),e.jsx(c,{id:"billTo",name:"billTo",value:t.billTo,onChange:h,type:"text",className:"form-control"})]}),e.jsxs("div",{className:"lg:col-span-6 md:col-span-6 col-span-12",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(p,{htmlFor:"billFromAddress",children:"From Address"})}),e.jsx(c,{id:"billFromAddress",name:"billFromAddress",value:t.billFromAddress,onChange:h,type:"text",className:"form-control"})]}),e.jsxs("div",{className:"lg:col-span-6 md:col-span-6 col-span-12",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(p,{htmlFor:"billToAddress",children:"Bill To Address"})}),e.jsx(c,{id:"billToAddress",name:"billToAddress",value:t.billToAddress,onChange:h,type:"text",className:"form-control"})]}),e.jsxs("div",{className:"lg:col-span-6 md:col-span-6 col-span-12",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(p,{htmlFor:"status",children:"Status"})}),e.jsxs(U,{className:"select-md",name:"status",value:t.status,onChange:h,disabled:!0,children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Shipped",children:"Shipped"}),e.jsx("option",{value:"Delivered",children:"Delivered"})]})]})]})}),e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs(H,{className:"mt-4",children:[e.jsxs(L,{children:[e.jsx(d,{}),e.jsx(d,{children:"Item Name"}),e.jsx(d,{children:"Unit Price"}),e.jsx(d,{children:"Units"}),e.jsx(d,{children:"Total Cost"}),e.jsx(d,{}),e.jsx(d,{children:"Actions"})]}),e.jsx(R,{className:"divide-y divide-border dark:divide-darkborder",children:t.orders.map((l,s)=>e.jsxs(V,{children:[e.jsx(m,{className:"whitespace-nowrap",children:e.jsx(w,{content:"Add Item",placement:"bottom",children:e.jsx(b,{className:"p-0 mb-2 bg-lightprimary text-primary h-8 w-8 rounded-full flex justify-center items-center  hover:bg-primary hover:text-white",onClick:C,children:e.jsx(f,{icon:"mdi:plus-circle",height:18})})})}),e.jsx(m,{className:"whitespace-nowrap min-w-44",children:e.jsx(c,{type:"text",value:l.itemName,placeholder:"Item Name",onChange:a=>v(s,"itemName",a.target.value),className:"form-control"})}),e.jsx(m,{className:"whitespace-nowrap min-w-44",children:e.jsx(c,{type:"number",value:l.unitPrice,placeholder:"Unit Price",onChange:a=>v(s,"unitPrice",a.target.value),className:"form-control"})}),e.jsx(m,{className:"whitespace-nowrap min-w-44",children:e.jsx(c,{type:"number",value:l.units,placeholder:"Units",onChange:a=>v(s,"units",a.target.value),className:"form-control"})}),e.jsx(m,{className:"whitespace-nowrap min-w-32",children:l.unitTotalPrice}),e.jsx(m,{className:"whitespace-nowrap",children:" "}),e.jsx(m,{className:"whitespace-nowrap",children:e.jsx(w,{content:"Delete Item",placement:"bottom",children:e.jsx(b,{color:"lighterror",className:"btn-circle p-0 mb-2",onClick:()=>I(s),children:e.jsx(f,{icon:"solar:trash-bin-minimalistic-outline",height:18})})})})]},s))})]})}),e.jsxs("div",{className:"border-t border-ld  py-5 px-4 ",children:[e.jsx("div",{className:"flex justify-end mb-3",children:e.jsxs("div",{className:"flex gap-3 lg:w-1/5",children:[e.jsx("h2",{className:"max-w-52 w-full opacity-80",children:"Sub Total:"}),e.jsx("h3",{className:"ms-auto text-base",children:t.subtotal})]})}),e.jsx("div",{className:"flex justify-end mb-3",children:e.jsxs("div",{className:"flex gap-3 lg:w-1/5",children:[e.jsx("h2",{className:"max-w-52 w-full opacity-80",children:"Vat:"}),e.jsx("h3",{className:"ms-auto text-base",children:t.vat})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex gap-3 lg:w-1/5",children:[e.jsx("h2",{className:"max-w-52 w-full opacity-80",children:"Grand Total:"}),e.jsx("h3",{className:"ms-auto text-base",children:t.grandTotal})]})})]}),e.jsx("div",{className:"flex justify-end ",children:e.jsxs("div",{className:"flex justify-end gap-3 mt-2",children:[e.jsx(b,{color:"primary",className:"mt-6",onClick:A,children:"Create Invoice"}),e.jsx(b,{color:"error",className:"mt-6",onClick:()=>{N("/apps/invoice/list")},children:"Cancel"})]})})]}),y&&e.jsx(G,{color:"warning",rounded:!0,className:"fixed top-3",children:"Invoice added successfully."})]})}function z(){return e.jsx(E,{children:e.jsx(_,{children:e.jsx(q,{})})})}const J=[{to:"/",title:"Home"},{title:"Invoice Create"}],je=()=>e.jsxs(e.Fragment,{children:[e.jsx($,{title:" Create A New Invoice ",items:J}),e.jsx(z,{})]});export{je as default};
