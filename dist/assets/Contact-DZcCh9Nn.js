import{r as t,j as e,C as G}from"./index-n5lagw8Y.js";import{I as i}from"./iconify-VfOFnMl8.js";import{u as J}from"./user-5-U1pxOGWF.js";import{u as K,g as Q,p as U,d as X,a as Z}from"./globalFetcher-ChilYVpY.js";import{B as C}from"./Button-BChG-RMT.js";import{M as $,a as O,b as ee}from"./ModalFooter-h4dtzp6W.js";import{M as H}from"./ModalHeader-CD9DSApg.js";import{L as b}from"./Label-fniU0OUx.js";import{T}from"./TextInput-BqV0c51w.js";import{S as R}from"./Select-Dhx4EgIQ.js";import{T as P}from"./Textarea-D63asWi9.js";import{A as q}from"./Alert-gpJFEXQ7.js";import{L as se}from"./List-CJG0vjEe.js";import{H as B}from"./HR-By-0zIu6.js";import{S as V}from"./index-DIAcSD30.js";import{e as te}from"./emailSv-DL7eD_np.js";import{D as Y}from"./Drawer-7041U4gn.js";import{T as _}from"./Tooltip-CDCKvG7n.js";import{C as ae}from"./CardBox-DP5V6wyZ.js";import{B as le}from"./BreadcrumbComp-BUvza-Rs.js";import"./index-DAr7p5OD.js";import"./resolve-theme-BrLp9Ogr.js";import"./floating-ui.react-DP-UpT2K.js";import"./x-icon-6miUmzgF.js";import"./theme-C-QQaxRv.js";import"./theme-CSbUk4Ig.js";import"./use-floating-DQGwidr_.js";import"./chevron-right-icon-BGQVsHY5.js";const L=t.createContext(void 0),re=({children:x})=>{const[d,s]=t.useState([]),[u,c]=t.useState([]),[a,j]=t.useState(null),[h,g]=t.useState("All"),[m,v]=t.useState(""),[l,k]=t.useState(!1),[w,A]=t.useState(!0),[F,E]=t.useState(null),{data:r,isLoading:N,error:y,mutate:p}=K("/api/data/contacts/contactsData",Q);t.useEffect(()=>{if(r){const n=r.data;if(s(n),d.length===0){const f=n.filter(S=>S.starred).map(S=>S.id);c(f),j(n[0])}}else y?(A(N),E(y)):A(N)},[r,y,N,d.length]);const W={selectedDepartment:h,setSelectedDepartment:g,contacts:d,setContacts:s,starredContacts:u,setStarredContacts:c,selectedContact:a,setSelectedContact:j,addContact:async n=>{try{await p(Z("/api/data/contacts/addContact",n))}catch(f){console.log("Failed to add contact",f)}},deleteContact:async n=>{try{await p(X("/api/data/contacts/deleteContact",{data:{contactId:n}})),a&&a.id===n&&j(null)}catch(f){console.error("Failed to delete contact:",f)}},updateContact:async n=>{try{await p(U("/api/data/contacts/updateContact",n)),j(n)}catch(f){console.error("Failed to update contact:",f)}},error:F,loading:w,selectContact:n=>{j(n)},toggleStarred:n=>{u.includes(n)?c(f=>f.filter(S=>S!==n)):c(f=>[...f,n]),s(f=>{const S=f.map(z=>z.id===n?{...z,starred:!z.starred}:z);return a?.id===n&&j(S.find(z=>z.id===n)||null),S})},searchTerm:m,updateSearchTerm:n=>{v(n)},openModal:l,setOpenModal:k};return e.jsx(L.Provider,{value:W,children:x})},ne=()=>{const{addContact:x}=t.useContext(L),[d,s]=t.useState(!1),[u,c]=t.useState(!1),a=()=>s(!0),j=()=>s(!1),[h,g]=t.useState({firstname:"",lastname:"",image:J,company:"",phone:"",email:"",address:"",notes:"",department:""}),m=l=>{const{name:k,value:w}=l.target;g({...h,[k]:w})},v=l=>{l.preventDefault(),x(h),c(!0),j(),setTimeout(()=>{c(!1)},5e3)};return e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-full ",color:"primary",onClick:a,children:"Add New Contact"}),e.jsxs($,{show:d,onClose:j,children:[e.jsx(H,{className:"pb-0",children:"Add New Contact"}),e.jsxs(O,{children:[e.jsx("p",{className:"text-sm text-darklink dark:text-bodytext mb-6",children:"Let's add a new contact for your application. Fill in all fields and click the submit button."}),e.jsx("div",{children:e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"md:col-span-6 col-span-12",children:[e.jsx(b,{htmlFor:"firstname",className:"mb-2 block capitalize",children:"firstname"}),e.jsx(T,{name:"firstname",className:"form-control",type:"text",onChange:m,value:h.firstname,required:!0})]}),e.jsxs("div",{className:"md:col-span-6 col-span-12",children:[e.jsx(b,{htmlFor:"lastname",className:"mb-2 block capitalize",children:"lastname"}),e.jsx(T,{name:"lastname",className:"form-control",type:"text",onChange:m,value:h.lastname,required:!0})]}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx(b,{htmlFor:"Department",className:"mb-2 block capitalize",children:"Select department"}),e.jsxs(R,{id:"Department",className:"select-md",name:"department",onChange:m,value:h.department,children:[e.jsx("option",{value:"Engineering",children:"Engineering"}),e.jsx("option",{value:"Sales",children:"Sales"}),e.jsx("option",{value:"Support",children:"Support"})]})]})}),e.jsxs("div",{className:"md:col-span-6 col-span-12",children:[e.jsx(b,{htmlFor:"company",className:"mb-2 block capitalize",children:"company"}),e.jsx(T,{name:"company",className:"form-control",type:"text",onChange:m,value:h.company})]}),e.jsxs("div",{className:"md:col-span-6 col-span-12",children:[e.jsx(b,{htmlFor:"phone",className:"mb-2 block capitalize",children:"phone"}),e.jsx(T,{name:"phone",className:"form-control",type:"tel",onChange:m,value:h.phone})]}),e.jsxs("div",{className:"md:col-span-6 col-span-12",children:[e.jsx(b,{htmlFor:"email",className:"mb-2 block capitalize",children:"email"}),e.jsx(T,{name:"email",className:"form-control",type:"email",onChange:m,value:h.email,required:!0})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx(b,{htmlFor:"address",className:"mb-2 block capitalize",children:"address"}),e.jsx(P,{id:"address",name:"address",className:"form-control-textarea",placeholder:"address...",required:!0,rows:4,onChange:m,value:h.address})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx(b,{htmlFor:"notes",className:"mb-2 block capitalize",children:"notes"}),e.jsx(P,{id:"notes",name:"notes",placeholder:"note...",className:"form-control-textarea",required:!0,rows:4,onChange:m,value:h.notes})]})]}),e.jsxs(ee,{className:"p-0 pt-6",children:[e.jsx(C,{color:"primary",className:"bg-primary",type:"submit",children:"Submit"}),e.jsx(C,{color:"error",onClick:j,children:"Cancel"})]})]})})]})]}),u&&e.jsx(q,{color:"success",rounded:!0,className:"fixed mx-auto start-0 end-0 top-3 w-fit z-9999",icon:()=>e.jsx(i,{icon:"solar:archive-minimalistic-broken",className:"text-white",height:22}),children:e.jsx("span",{className:"ms-2 font-medium",children:"Contact Added successfully."})})]})},oe=()=>{const{setSelectedDepartment:x,updateSearchTerm:d,selectedDepartment:s}=t.useContext(L),u=[{id:2,name:"All",sort:"show_all",icon:"solar:inbox-unread-outline"},{id:3,name:"Frequent",sort:"frequent_contact",icon:"solar:map-arrow-square-line-duotone"},{id:4,name:"Starred",sort:"starred_contact",icon:"solar:cart-broken"},{id:6,devider:!0},{id:5,filterbyTitle:"Categories"},{id:7,name:"Engineering",sort:"engineering_department",icon:"solar:folder-broken",color:"primary"},{id:8,name:"Support",sort:"support_department",icon:"solar:question-circle-outline",color:"error"},{id:9,name:"Sales",sort:"sales_department",icon:"solar:sale-square-outline",color:"success"}],c=a=>{x(a),d("")};return e.jsxs("div",{className:"left-part max-w-[235px] h-full w-full",children:[e.jsx(ne,{}),e.jsx(se,{className:"my-4",children:u.map(a=>a.filterbyTitle?e.jsx("h6",{className:"uppercase text-xs pb-3",children:a.filterbyTitle},`filter-title-${a.id}`):a.devider?e.jsx("div",{className:"my-4",children:e.jsx(B,{className:"my-6"})},`divider-${a.id}`):e.jsxs("div",{className:`py-[10px] flex items-center gap-2 px-4 hover:bg-muted dark:hover:bg-lightinfo/60 rounded-md text-ld cursor-pointer ${s===a.name?"text-primary bg-lighthover dark:bg-lightinfo/60 ":""}`,onClick:()=>c(a.name||""),children:[e.jsx(i,{icon:a.icon,height:18,className:`text-${a.color}`}),a.name]},`list-item-${a.id}`))})]})},ce=({onClick:x})=>{const{searchTerm:d,updateSearchTerm:s}=t.useContext(L),u=c=>{s(c.target.value)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex gap-3 bg-white dark:bg-transparent px-6 py-5 items-center",children:[e.jsx(C,{color:"lightprimary",className:"btn-circle p-0 lg:hidden flex shrink-0",onClick:x,children:e.jsx(i,{icon:"solar:hamburger-menu-outline",height:18})}),e.jsx(T,{id:"search",value:d,placeholder:"Search Notes",className:"form-control w-full",sizing:"md",required:!0,onChange:u,icon:()=>e.jsx(i,{icon:"solar:magnifer-line-duotone",height:18})})]})})};function ie({openContact:x}){const{selectedDepartment:d,contacts:s,deleteContact:u,starredContacts:c,toggleStarred:a,setSelectedContact:j,selectedContact:h,searchTerm:g,openModal:m,setOpenModal:v}=t.useContext(L),[l,k]=t.useState(null),w=r=>{k(r),v(!0)},F=((r,N,y)=>{let p=[...r];if(N!=="All"&&(N==="Frequent"?p=p.filter(o=>o.frequentlycontacted):N==="Starred"?p=p.filter(o=>c.includes(o.id)):p=p.filter(o=>o.department===N)),g.trim()!==""){const o=y.toLowerCase();p=p.filter(D=>D.firstname.toLowerCase().includes(o)||D.lastname.toLowerCase().includes(o))}return p})(s,d,g),E=r=>{j(r)};return e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"max-h-[600px] h-[calc(100vh_-_100px)]",children:e.jsx("div",{className:"border-right border-color-divider  h-full",children:d==="Starred"&&F.length===0?e.jsx("div",{className:"px-6 pt-3",children:e.jsxs(q,{color:"lighterror",icon:()=>e.jsx(i,{icon:"solar:info-circle-broken",height:18}),children:[e.jsx("span",{className:"font-medium ms-3",children:"No"})," starred contacts available."]})}):g!==""&&F.length===0?e.jsx("div",{className:"px-6 pt-3",children:e.jsxs(q,{color:"lighterror",icon:()=>e.jsx(i,{icon:"solar:info-circle-broken",height:18}),children:[e.jsx("span",{className:"font-medium ms-3",children:"No"})," Contact found"]})}):e.jsx("div",{children:F.map((r,N)=>e.jsxs("div",{className:`cursor-pointer flex py-4 px-6 gap-3 items-center group bg-hover  ${h&&h.id===r.id?"bg-lightinfo/30":"bg-transparent"}`,onClick:()=>{E(r),x(!0)},children:[e.jsx("img",{src:r.image,width:40,height:40,alt:"name",className:"rounded-full"}),e.jsxs("div",{children:[e.jsxs("h6",{className:"text-sm group-hover:text-primary",children:[r.firstname," ",r.lastname]}),e.jsx("p",{className:"text-xs text-ld opacity-80 font-medium mt-0.5",children:r.department})]}),e.jsxs("div",{className:"flex ms-auto",children:[e.jsx("div",{className:"me-2",onClick:()=>a(r.id),children:c.includes(r.id)?e.jsx(i,{icon:"solar:star-bold",className:"text-warning",height:"15",fill:"rgb(255, 193, 7)"}):e.jsx(i,{icon:"solar:star-line-duotone",height:"15"})}),e.jsx("div",{onClick:()=>w(r.id),children:e.jsx(i,{icon:"solar:trash-bin-2-outline",height:15})})]})]},N))})})}),e.jsxs($,{show:m,size:"md",onClose:()=>v(!1),popup:!0,children:[e.jsx(H,{}),e.jsx(O,{children:e.jsxs("div",{className:"text-center",children:[e.jsx(i,{icon:"solar:info-circle-broken",className:"mx-auto mb-4 h-14 w-14 text-gray-400 dark:text-gray-200"}),e.jsx("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this contact?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(C,{color:"primary",onClick:()=>{u(l),v(!1)},children:"Yes"}),e.jsx(C,{color:"error",onClick:()=>v(!1),children:"No, cancel"})]})]})})]})]})}const de=({openContactValue:x,onCloseContact:d})=>{const{selectedContact:s,deleteContact:u,updateContact:c,starredContacts:a,toggleStarred:j,openModal:h,setOpenModal:g}=t.useContext(L),[m,v]=t.useState(!1),[l,k]=t.useState(null),[w,A]=t.useState(!1),{activeDir:F}=t.useContext(G);t.useEffect(()=>{k(s)},[s]);const E=()=>{v(!m)},r=()=>{l&&c(l),v(!1),A(!0),setTimeout(()=>{A(!1)},5e3)},N=o=>{const{name:D,value:M}=o.target;l&&k(I=>({...I,[D]:M}))},y=()=>{s&&g(!0)},p=o=>{const D=o.target.value;l&&k(M=>({...M,department:D}))};return s?e.jsxs(e.Fragment,{children:[e.jsxs(Y,{open:x,backdrop:!1,onClose:d,position:`${F==="rtl"?"left":"right"}`,className:"lg:relative lg:translate-none lg:h-auto lg:bg-transparent w-full lg:z-0 dark:bg-dark",children:[e.jsx("div",{className:"lg:hidden block p-6 pb-2",children:e.jsxs(C,{color:"outlineprimary",onClick:d,className:"py-0 gap-2",children:[e.jsx(i,{icon:"solar:round-arrow-left-linear",height:18}),"Back"]})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center py-4 px-5",children:[e.jsx("h5",{className:"card-title",children:"Contact Details"}),e.jsxs("div",{className:"ms-auto flex gap-1 items-center",children:[e.jsx(_,{content:"important",children:e.jsx("div",{className:"btn-circle-hover cursor-pointer",onClick:()=>j(s.id),children:a.includes(s.id)?e.jsx(i,{icon:"solar:star-bold",className:"text-warning",height:"18"}):e.jsx(i,{icon:"solar:star-line-duotone",height:"18"})})}),e.jsx(_,{content:m?"Save":"Edit",children:e.jsx("div",{onClick:m?r:E,className:"btn-circle-hover cursor-pointer",children:m?e.jsx(i,{icon:"solar:gallery-check-broken",height:"18"}):e.jsx(i,{icon:"solar:pen-2-outline",height:"18"})})}),e.jsx(_,{content:"Delete",children:e.jsx("div",{onClick:y,className:"btn-circle-hover cursor-pointer",children:e.jsx(i,{icon:"solar:trash-bin-minimalistic-outline",height:"18"})})})]})]}),e.jsx(B,{className:"my-0"}),e.jsx(V,{className:"max-h-[600px] h-[calc(100vh_-_100px)]",children:e.jsx("div",{className:"py-5 ",children:m&&l?e.jsxs("div",{className:"pt-1 px-5",children:[[{id:1,title:"First Name",value:l.firstname,name:"firstname"},{id:2,title:"Last Name",value:l.lastname,name:"lastname"},{id:3,title:"Company",value:l.company,name:"company"},{id:4,title:"Department",value:l.department,name:"department"},{id:5,title:"Email",value:l.email,name:"email"},{id:6,title:"Phone",value:l.phone,name:"phone"},{id:7,title:"Address",value:l.address,name:"address"},{id:8,title:"Notes",value:l.notes,name:"notes"}].map(o=>e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{children:[e.jsx(b,{className:"font-semibold block mb-2",children:o.title}),o.name!=="department"&&e.jsx(T,{type:"text",className:"form-control",name:o.name,value:o.value,onChange:N}),o.name==="department"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(b,{htmlFor:"department"})}),e.jsxs(R,{id:"countries",className:"select-md",value:l.department,onChange:p,required:!0,children:[e.jsx("option",{children:"Sales"}),e.jsx("option",{children:"Engineering"}),e.jsx("option",{children:"HR"})]})]})]}),e.jsx("div",{})]},o.id)),e.jsx("div",{className:"mt-2",children:e.jsx(C,{color:"primary",onClick:r,children:"Save Contact"})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("img",{alt:`${s.firstname} ${s.lastname}`,src:s.image,height:70,width:70,className:"rounded-full"}),e.jsxs("div",{children:[e.jsxs("h6",{className:"text-base",children:[s.firstname," ",s.lastname]}),e.jsx("p",{className:"text-darklink dark:text-bodytext text-sm",children:s.department}),e.jsx("p",{className:"text-darklink dark:text-bodytext text-sm",children:s.company})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-5 mt-8",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("p",{className:"text-darklink dark:text-bodytext text-sm",children:"Phone Number"}),e.jsx("h5",{className:"font-semibold mb-0.5",children:s.phone})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("p",{className:"text-darklink dark:text-bodytext text-sm",children:"Email address"}),e.jsx("h5",{className:"font-semibold mb-0.5",children:s.email})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx("p",{className:"text-darklink dark:text-bodytext text-sm",children:"Address"}),e.jsx("h5",{className:"font-semibold mb-0.5",children:s.address})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("p",{className:"text-darklink dark:text-bodytext text-sm",children:"Department"}),e.jsx("h5",{className:"font-semibold mb-0.5",children:s.department})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("p",{className:"text-darklink dark:text-bodytext text-sm",children:"Company"}),e.jsx("h5",{className:"font-semibold mb-0.5",children:s.company})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx("p",{className:"text-darklink dark:text-bodytext text-sm mb-1",children:"Notes"}),e.jsx("h5",{className:"font-medium mb-0.5",children:s.notes})]})]})]}),e.jsx(B,{className:"my-2"}),e.jsxs("div",{className:"py-4 px-5 gap-2 flex",children:[e.jsx(C,{color:"primary",onClick:E,className:"",children:"Edit"}),e.jsx(C,{color:"lighterror",onClick:y,className:"",children:"Delete"})]})]})})})]})]}),e.jsxs($,{show:h,size:"md",onClose:()=>g(!1),popup:!0,children:[e.jsx(H,{}),e.jsx(O,{children:e.jsxs("div",{className:"text-center",children:[e.jsx(i,{icon:"solar:info-circle-broken",className:"mx-auto mb-4 h-14 w-14 text-gray-400 dark:text-gray-200"}),e.jsx("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this contact?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(C,{color:"error",onClick:()=>{u(s.id),g(!1)},children:"Yes"}),e.jsx(C,{color:"lighterror",onClick:()=>g(!1),children:"No, cancel"})]})]})})]}),w&&e.jsx(q,{color:"success",rounded:!0,className:"fixed mx-auto start-0 end-0 top-3 w-fit z-9999",icon:()=>e.jsx(i,{icon:"solar:archive-minimalistic-broken",className:"text-white",height:22}),children:e.jsx("span",{className:"ms-2 font-medium",children:"Contact updated successfully."})})]}):e.jsxs("div",{className:"w-full text-center p-5 ",children:[e.jsx("div",{className:"px-6 pt-3",children:e.jsx(q,{color:"lighterror",icon:()=>e.jsx(i,{icon:"solar:info-circle-broken",height:18}),children:e.jsx("span",{className:"ps-2 text-base",children:" Please Select a Contact"})})}),e.jsx("h4",{}),e.jsx("img",{src:te,alt:"Email Icon",width:"250",height:"250",className:"mx-auto"})]})},me=()=>{const[x,d]=t.useState(!1),s=()=>d(!1),[u,c]=t.useState(!1);return e.jsx(e.Fragment,{children:e.jsx(re,{children:e.jsx(ae,{className:"p-0 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx(Y,{open:x,onClose:s,className:"lg:relative lg:translate-none lg:h-auto lg:bg-transparent dark:bg-dark  max-w-[235px] w-full lg:z-0",children:e.jsx(oe,{})}),e.jsxs("div",{className:"left-part lg:max-w-[340px] max-w-full lg:border-e lg:border-ld border-e-0  w-full px-0 pt-0 ",children:[e.jsx(ce,{onClick:()=>d(!0)}),e.jsx(ie,{openContact:c})]}),e.jsx(de,{openContactValue:u,onCloseContact:()=>c(!1)})]})})})})},Pe=()=>{const x=[{to:"/",title:"Home"},{title:"Contact"}];return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Contact App",items:x}),e.jsx(me,{})]})};export{Pe as Contact,Pe as default};
