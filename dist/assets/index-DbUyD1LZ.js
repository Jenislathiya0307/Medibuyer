import{r as a,j as J}from"./index-n5lagw8Y.js";import{u as E,g as S,a as c}from"./globalFetcher-ChilYVpY.js";const K=a.createContext(void 0),o={posts:[],users:[],gallery:[],followers:[],search:"",loading:!0},Q=({children:k})=>{const[x,F]=a.useState(o.posts),[v,j]=a.useState(o.users),[P,L]=a.useState(o.gallery),[d,C]=a.useState(o.followers),[D,U]=a.useState(o.search),[R,p]=a.useState(null),[G,t]=a.useState(o.loading),[b]=a.useState({name:"Mathew Anderson",role:"Designer",avatar:"/images/profile/user-1.jpg",coverImage:"/images/backgrounds/profilebg.jpg",postsCount:938,followersCount:3586,followingCount:2659}),{data:g,isLoading:u,error:y,mutate:l}=E("/api/data/postData",S),{data:n,isLoading:m,error:f}=E("/api/data/users",S),{data:w,isLoading:i,error:h}=E("/api/data/gallery",S);a.useEffect(()=>{g&&n&&w?(F(g.data),t(u),j(n.data),t(m),C(n.data),L(w.data),t(i)):y?(p(y),t(u)):f?(p(f),t(m)):(h&&p(h),t(i))},[g,n,w,u,m,i,h,y,f]);const I=e=>{L(s=>[...s,e])},A=e=>{C(s=>s.map(r=>r.id===e?{...r,isFollowed:!r.isFollowed}:r))},M=()=>d&&d.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())),W=async(e,s)=>{try{await l(c("/api/data/posts/comments/add",{postId:e,comment:s}))}catch(r){console.error("Error adding comment:",r)}},q=async(e,s,r)=>{try{await l(c("/api/data/posts/replies/add",{postId:e,commentId:s,reply:r}))}catch(H){console.error("Error adding reply:",H)}},z=async e=>{try{await l(c("/api/data/posts/like",{postId:e}))}catch(s){console.error("Error liking post:",s)}},B=async(e,s)=>{try{await l(c("/api/data/posts/replies/like",{postId:e,commentId:s}))}catch(r){console.error("Error liking reply:",r)}};return J.jsx(K.Provider,{value:{posts:x,users:v,error:R,gallery:P,loading:G,profileData:b,addGalleryItem:I,addReply:q,likePost:z,addComment:W,likeReply:B,followers:M(),toggleFollow:A,setSearch:U,search:D},children:k})};export{K as U,Q as a};
