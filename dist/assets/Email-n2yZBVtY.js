import{r as a,j as e}from"./index-n5lagw8Y.js";import{C as H}from"./CardBox-DP5V6wyZ.js";import{u as A,g as P,d as Q}from"./globalFetcher-ChilYVpY.js";import{S as B}from"./index-DIAcSD30.js";import{I as o}from"./iconify-VfOFnMl8.js";import{e as _}from"./emailSv-DL7eD_np.js";import{A as q}from"./Alert-gpJFEXQ7.js";import{D as M}from"./Drawer-7041U4gn.js";import{B as y}from"./Button-BChG-RMT.js";import{T as F}from"./Tooltip-CDCKvG7n.js";import{B as p}from"./Badge-zDQe1ecK.js";import{H as T}from"./HR-By-0zIu6.js";import{T as D}from"./Textarea-D63asWi9.js";import{M as O,a as R,b as V}from"./ModalFooter-h4dtzp6W.js";import{M as $}from"./ModalHeader-CD9DSApg.js";import{L as w}from"./Label-fniU0OUx.js";import{T as I}from"./TextInput-BqV0c51w.js";import{F as W}from"./FileInput-BGD0akVd.js";import{C as G}from"./Checkbox-DjM3E0bB.js";import{f as J}from"./formatDistanceToNowStrict-CuRN7-9l.js";import{B as K}from"./BreadcrumbComp-BUvza-Rs.js";import"./resolve-theme-BrLp9Ogr.js";import"./index-DAr7p5OD.js";import"./x-icon-6miUmzgF.js";import"./floating-ui.react-DP-UpT2K.js";import"./use-floating-DQGwidr_.js";import"./theme-CSbUk4Ig.js";import"./toDate-qY-Vit60.js";import"./en-US-Bi_cwWVL.js";import"./chevron-right-icon-BGQVsHY5.js";const U={emails:[],selectedEmail:null,filter:"inbox",searchQuery:"",loading:!0,error:null,setSelectedEmail:()=>{},deleteEmail:()=>{},toggleStar:()=>{},toggleImportant:()=>{},setFilter:()=>{},setSearchQuery:()=>{}},C=a.createContext(U),X=({children:n})=>{const[l,i]=a.useState([]),[t,s]=a.useState(null),[m,j]=a.useState("inbox"),[g,f]=a.useState(""),[b,u]=a.useState(!0),[x,E]=a.useState(null),{data:N,isLoading:k,error:v,mutate:r}=A("/api/data/email/EmailData",P);a.useEffect(()=>{N?(i(N.data),l?.length==0&&s(N.data[0]),u(k)):(v&&E(v),u(k))},[N,v,k,l?.length]);const S=async h=>{try{await r(Q("/api/data/email/delete",{emailId:h})),t&&t.id===h&&s(null)}catch(c){console.error("Error deleting email:",c)}},L=h=>{i(c=>c.map(d=>d.id===h?{...d,starred:!d.starred}:d)),t?.id===h&&s(c=>({...c,starred:!c.starred}))},z=h=>{i(c=>c.map(d=>d.id===h?{...d,important:!d.important}:d)),t?.id===h&&s(c=>({...c,important:!c.important}))};return e.jsx(C.Provider,{value:{emails:l,selectedEmail:t,setSelectedEmail:s,deleteEmail:S,toggleStar:L,toggleImportant:z,setFilter:j,filter:m,error:x,loading:b,searchQuery:g,setSearchQuery:f},children:n})},Y=({openMailValue:n,onCloseMail:l})=>{const[i,t]=a.useState(!1),{selectedEmail:s,deleteEmail:m,toggleStar:j,toggleImportant:g}=a.useContext(C),f=()=>{t(!i)},b=()=>{s&&m(s.id)};if(!s)return e.jsxs("div",{className:"w-full text-center p-5 dark:bg-dark",children:[e.jsx("div",{className:"px-6 pt-3",children:e.jsx(q,{color:"lighterror",icon:()=>e.jsx(o,{icon:"solar:info-circle-broken",height:18}),children:e.jsx("span",{className:"ps-2 text-base",children:" Please Select an Email"})})}),e.jsx("h4",{}),e.jsx("img",{src:_,alt:"Email Icon",width:"250",height:"250",className:"mx-auto"})]});const u=s.attchments&&s.attchments.length>0;return e.jsx(e.Fragment,{children:e.jsxs(M,{open:n,backdrop:!1,onClose:l,position:"right",className:"lg:relative lg:translate-none dark:bg-dark lg:h-auto lg:bg-transparent w-full lg:z-0",children:[e.jsx("div",{className:"lg:hidden block p-6 pb-2",children:e.jsxs(y,{color:"outlineprimary",onClick:l,className:"py-0 gap-2",children:[e.jsx(o,{icon:"solar:round-arrow-left-linear",height:18}),"Back"]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"w-fit",children:e.jsxs("div",{className:"flex items-center gap-2 py-4 px-5",children:[e.jsx(F,{content:"Star",children:e.jsx("div",{className:"btn-circle-hover cursor-pointer group",onClick:()=>j(s.id),children:s.starred===!0?e.jsx(o,{icon:"solar:star-bold",className:"text-warning",height:"18"}):e.jsx(o,{icon:"solar:star-line-duotone",height:"17",className:"text-dark dark:text-darklink group-hover:text-primary"})})}),e.jsx(F,{content:"Important",children:e.jsx("div",{className:"btn-circle-hover cursor-pointer group",children:e.jsx(o,{icon:"solar:info-circle-outline",className:"text-dark dark:text-darklink group-hover:text-primary",height:"18",onClick:()=>g(s.id),style:{fill:s.important?"#FFD9E4":""}})})}),e.jsx(F,{content:"Delete",children:e.jsx("div",{className:"btn-circle-hover cursor-pointer group",children:e.jsx(o,{icon:"solar:trash-bin-minimalistic-outline",className:"text-dark  dark:text-darklink group-hover:text-primary",height:"18",onClick:b})})})]})}),e.jsxs(B,{className:"max-h-[600px] h-[calc(100vh_-_100px)]",children:[e.jsxs("div",{className:"py-5 px-5",children:[e.jsxs("div",{className:"flex items-center w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("img",{alt:"user",src:s.thumbnail,height:48,width:48,className:"rounded-full"}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm",children:s.from}),e.jsx("p",{className:"text-darklink dark:text-darklink text-sm",children:s.To})]})]}),e.jsx("div",{children:s.label==="Promotional"?e.jsx(p,{color:"primary",children:s.label}):s.label==="Social"?e.jsx(p,{color:"error",children:s.label}):s.label==="Health"?e.jsx(p,{color:"success",children:s.label}):e.jsx(p,{color:"primary",children:s.label})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h5",{className:"text-xl",children:s.subject}),e.jsx("div",{className:"email-content",dangerouslySetInnerHTML:{__html:s.emailContent}}),u&&e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"my-6"}),e.jsx("h6",{className:"text-sm",children:"Attachments"}),e.jsx("div",{className:"grid grid-cols-12 gap-6 mt-4",children:s.attchments.map(x=>e.jsx("div",{className:"lg:col-span-4 md:col-span-6 col-span-12",children:e.jsxs("div",{className:"flex items-center gap-3 group cursor-pointer",children:[e.jsx("div",{className:"bg-muted dark:bg-darkmuted p-3 rounded-md",children:e.jsx("img",{src:x.image,height:24,width:24,alt:"download"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm group-hover:text-primary",children:x.title}),e.jsx("p",{className:"text-sm text-darklink dark:text-darklink",children:x.fileSize})]})]})},x.id))}),e.jsx(T,{className:"my-4"})]})]})]}),e.jsxs("div",{className:"px-5",children:[e.jsxs("div",{className:"flex gap-6 ",children:[e.jsxs("span",{className:"cursor-pointer text-sm text-ld text-primary-ld flex items-center",onClick:f,children:[e.jsx(o,{icon:"solar:undo-left-outline",height:18,className:"me-1"}),"Reply"]}),e.jsxs("span",{className:"cursor-pointer text-sm text-ld text-primary-ld flex items-center",children:[e.jsx(o,{icon:"solar:undo-right-outline",height:18,className:"me-1"}),"Forward"]})]}),i&&e.jsx(D,{className:"form-control-textarea mt-4",required:!0,rows:4})]})]})]})]})})},Z=()=>{const[n,l]=a.useState(!1),i=()=>l(!0),t=()=>l(!1);return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-full  rounded-xl",color:"primary",onClick:i,children:"Compose"}),e.jsxs(O,{show:n,onClose:t,children:[e.jsx($,{className:"pb-0",children:"Compose Mail"}),e.jsx(R,{children:e.jsx("form",{children:e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-12",children:[e.jsx(w,{htmlFor:"to",className:"mb-2 block capitalize",children:"to"}),e.jsx(I,{id:"to",className:"form-control",type:"text"})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx(w,{htmlFor:"subject",className:"mb-2 block capitalize",children:"Subject"}),e.jsx(I,{id:"subject",className:"form-control",type:"text"})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx(w,{htmlFor:"message",className:"mb-2 block capitalize",children:"Message"}),e.jsx(D,{id:"message",className:"form-control-textarea",required:!0,rows:4})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx(w,{htmlFor:"attachment",className:"mb-2 block capitalize",children:"Attachment"}),e.jsx(W,{id:"attachment",className:"form-control"})]}),e.jsx("div",{className:"col-span-12",children:e.jsxs(V,{className:"p-0 pt-6",children:[e.jsx(y,{color:"primary",className:"bg-primary",type:"submit",onClick:()=>l(!1),children:"send"}),e.jsx(y,{color:"error",onClick:t,children:"Cancel"})]})})]})})})]})]})},ee=()=>{const n=[{id:2,name:"inbox",icon:"solar:inbox-line-broken"},{id:3,name:"sent",icon:"solar:plain-2-linear"},{id:4,name:"draft",icon:"solar:notes-linear"},{id:14,name:"spam",icon:"solar:flag-2-outline"},{id:5,name:"trash",icon:"solar:trash-bin-trash-outline"},{id:6,divider:!0},{id:1,filterbyTitle:"Sort By"},{id:7,name:"starred",icon:"solar:star-fall-minimalistic-2-line-duotone"},{id:8,name:"important",icon:"solar:bell-bing-linear"},{id:9,divider:!0},{id:13,filterbyTitle:"Labels"},{id:10,name:"Promotional",icon:"solar:folder-open-linear",color:"primary"},{id:11,name:"Social",icon:"solar:folder-open-linear",color:"error"},{id:12,name:"Health",icon:"solar:folder-open-linear",color:"success"}],{setFilter:l,filter:i}=a.useContext(C),t=s=>{l(s)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"left-part max-w-[235px] h-full w-full ",children:[e.jsx(Z,{}),e.jsx("ul",{className:"my-4",children:n.map(s=>s.filterbyTitle?e.jsx("h6",{className:"uppercase text-xs pb-3",children:s.filterbyTitle},s.id):s.divider?e.jsx("div",{className:"my-4",children:e.jsx(T,{className:"my-6"})},s.id):e.jsxs("li",{className:`py-[10px] first:mt-0 mt-1 flex items-center gap-2 px-4 hover:bg-lightinfo dark:hover:bg-lightinfo/30 rounded-md text-ld cursor-pointer capitalize  ${i===s.name?"text-primary bg-lightinfo/30":""}`,onClick:()=>t(s.name),children:[e.jsx(o,{icon:s.icon,height:18,className:`text-${s.color}`}),s.name]},s.id))})]})})},se=({openMail:n})=>{const{emails:l,setSelectedEmail:i,deleteEmail:t,filter:s,toggleStar:m,toggleImportant:j,searchQuery:g}=a.useContext(C),[f,b]=a.useState({}),[u,x]=a.useState(l.length>0?l[0].id:null),E=r=>{b(S=>({...S,[r]:!S[r]}))},N=r=>{t(r)},k=g?l.filter(r=>r.from.toLowerCase().includes(g.toLowerCase())):l.filter(r=>s==="starred"?r.starred:["Promotional","Social","Health"].includes(s)?r.label===s:r[s]),v=r=>{i(r),x(r.id),b({})};return e.jsx(e.Fragment,{children:e.jsx(B,{className:"max-h-[600px] h-[calc(100vh_-_100px)]",children:e.jsx("div",{className:"border-right border-color-divider h-full",children:k.map(r=>e.jsx("div",{className:`cursor-pointer  py-4 px-6 gap-3 items-center group bg-hover  ${u===r.id?"bg-lightinfo/30":""} `,children:e.jsxs("div",{className:"flex gap-3",onClick:()=>{v(r),n(!0)},children:[e.jsx("div",{children:e.jsx(G,{className:"checkbox",checked:f[r.id]||!1,onChange:()=>E(r.id)})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h6",{className:"text-sm group-hover:text-primary",children:r.from}),r.label=="Promotional"?e.jsx(p,{color:"primary",children:r.label}):r.label=="Social"?e.jsx(p,{color:"error",children:r.label}):r.label=="Health"?e.jsx(p,{color:"success",children:r.label}):e.jsx(p,{color:"primary",children:r.label})]}),e.jsx("p",{className:"text-sm  line-clamp-1 mt-2 mb-3 text-ld opacity-90",children:r.subject}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[r.starred?e.jsx(o,{icon:"solar:star-bold",height:"16",className:"text-warning",onClick:()=>m(r.id)}):e.jsx(o,{icon:"solar:star-line-duotone",height:"16",className:"text-dark dark:text-darklink",onClick:()=>m(r.id)}),r.important?e.jsx(o,{icon:"solar:info-circle-bold",height:"17",className:"text-info",onClick:()=>j(r.id)}):e.jsx(o,{icon:"solar:info-circle-outline",height:"17",className:"text-dark dark:text-darklink",onClick:()=>j(r.id)}),f[r.id]&&e.jsx(o,{icon:"solar:trash-bin-minimalistic-outline",height:"17",className:"text-dark dark:text-darklink",onClick:()=>N(r.id)})]}),e.jsxs("p",{className:"text-xs  font-medium mt-0.5",children:[J(new Date(r.time),{addSuffix:!1})," ","ago"]})]})]})]})},r.id))})})})},re=({onClick:n})=>{const{setSearchQuery:l,searchQuery:i}=a.useContext(C),t=s=>{const m=s.target.value.toLowerCase();l(m)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex gap-3 bg-white dark:bg-transparent px-6 py-5 items-center",children:[e.jsx(y,{color:"lightprimary",className:"btn-circle p-0 lg:hidden flex shrink-0",onClick:n,children:e.jsx(o,{icon:"solar:hamburger-menu-outline",height:18})}),e.jsx(I,{id:"search",placeholder:"Search Emails",className:"form-control w-full",sizing:"md",required:!0,value:i,onChange:t,icon:()=>e.jsx(o,{icon:"solar:magnifer-line-duotone",height:18})})]})})},le=()=>{const[n,l]=a.useState(!1),i=()=>l(!1),[t,s]=a.useState(!1);return e.jsx(e.Fragment,{children:e.jsx(X,{children:e.jsx(H,{className:"p-0 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx(M,{open:n,onClose:i,className:"lg:relative lg:translate-none lg:h-auto dark:bg-dark lg:bg-transparent max-w-[235px] w-full lg:z-0",children:e.jsx(ee,{})}),e.jsxs("div",{className:"left-part lg:max-w-[340px] max-w-full md:border-e md:border-ld border-e-0   w-full px-0 pt-0",children:[e.jsx(re,{onClick:()=>l(!0)}),e.jsx(se,{openMail:s})]}),e.jsx(Y,{openMailValue:t,onCloseMail:()=>s(!1)})]})})})})},te=[{to:"/",title:"Home"},{title:"Email"}],ze=()=>e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Email App",items:te}),e.jsx(le,{})]});export{ze as default};
