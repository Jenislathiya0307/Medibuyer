import{r as s,j as e}from"./index-n5lagw8Y.js";import{I as y}from"./iconify-VfOFnMl8.js";import{C as F}from"./CardBox-DP5V6wyZ.js";import{u as B,g as D,d as A,p as L,a as M}from"./globalFetcher-ChilYVpY.js";import{T as $}from"./TextInput-BqV0c51w.js";import{T as z}from"./Tooltip-CDCKvG7n.js";import{B as g}from"./Button-BChG-RMT.js";import{A as O}from"./Alert-gpJFEXQ7.js";import{q as S}from"./index-tzsmjPJG.js";import{M as U,a as q,b as H}from"./ModalFooter-h4dtzp6W.js";import{M as P}from"./ModalHeader-CD9DSApg.js";import{T as k}from"./Textarea-D63asWi9.js";import{D as R}from"./Drawer-7041U4gn.js";import{B as W}from"./BreadcrumbComp-BUvza-Rs.js";import"./resolve-theme-BrLp9Ogr.js";import"./index-DAr7p5OD.js";import"./floating-ui.react-DP-UpT2K.js";import"./use-floating-DQGwidr_.js";import"./x-icon-6miUmzgF.js";import"./iconBase-CU_7cgqW.js";import"./chevron-right-icon-BGQVsHY5.js";const j={notes:[],loading:!0,error:null,selectedNoteId:1,selectNote:()=>{},addNote:async()=>{},updateNote:async()=>{},deleteNote:async()=>{}},C=s.createContext(j),G=({children:a})=>{const[n,c]=s.useState(j.notes),[r,d]=s.useState(j.loading),[u,l]=s.useState(j.error),[p,m]=s.useState(j.selectedNoteId),{data:o,isLoading:t,error:h,mutate:x}=B("/api/data/notes/NotesData",D);s.useEffect(()=>{o?(c(o.data),d(!1)):(h&&l(h),d(!1))},[o,h,t]);const v=N=>{m(N)},i=async N=>{try{await x(M("/api/notes/add",N))}catch(f){console.error("Error adding note:",f)}},w=async(N,f,E)=>{try{await x(L("/api/notes/update",{id:N,title:f,color:E}))}catch(I){console.error("Error updating note:",I)}},T=async N=>{try{const f=await x(A("/api/notes/delete",{id:N}));console.log(f.data)}catch(f){console.error("Error deleting note:",f)}};return e.jsx(C.Provider,{value:{notes:n,loading:r,error:u,selectedNoteId:p,selectNote:v,addNote:i,updateNote:w,deleteNote:T},children:a})};let b=0;const J=()=>{const{notes:a,selectNote:n,deleteNote:c}=s.useContext(C),[r,d]=s.useState(""),[u,l]=s.useState(null);s.useEffect(()=>{if(a.length>0&&b===0){const t=a[0].id;l(t),b=b+1}},[a]);const m=((t,h)=>h!==""?t.filter(x=>!x.deleted&&x.title.toLocaleLowerCase().concat(" ").includes(h.toLocaleLowerCase())):t.filter(x=>!x.deleted))(a,r),o=t=>{l(t),n(t)};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx($,{id:"search",value:r,placeholder:"Search Notes",className:"form-control",sizing:"md",required:!0,onChange:t=>d(t.target.value)}),e.jsx("h6",{className:"text-base mt-6",children:"All Notes"}),e.jsx("div",{className:"flex flex-col gap-3 mt-4",children:m&&m.length?m.map(t=>e.jsx("div",{children:e.jsxs("div",{className:`cursor-pointer relative p-4 rounded-md bg-light${t.color} dark:bg-dark${t.color}
                  ${u===t.id?"scale-100":"scale-95"} transition-transform duration-200`,onClick:()=>o(t.id),children:[e.jsx("h6",{className:`text-base truncate text-${t.color}`,children:t.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-ld",children:new Date(t.datef).toLocaleDateString()}),e.jsx("div",{children:e.jsx(z,{content:"Delete",children:e.jsx(g,{"aria-label":"delete",className:"bg-transparent dark:bg-transparent hover:text-primary dark:hover:text-primary h-8 w-8 text-ld p-0 flex items-center hover:bg-transparent dark:hover:bg-transparent",onClick:()=>c(t.id),children:e.jsx(y,{icon:"solar:trash-bin-minimalistic-outline",height:18})})})})]})]})},t.id)):e.jsx("div",{children:e.jsx(O,{color:"error",icon:()=>e.jsx(y,{icon:"solar:info-circle-linear",className:"me-2",height:20}),children:e.jsx("span",{className:"font-medium",children:" No Notes Found!"})})})})]})})},K=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"left-part",children:e.jsx(J,{})})}),Q=({colors:a})=>{const{addNote:n}=s.useContext(C),[c,r]=s.useState(!1),[d,u]=s.useState("primary"),[l,p]=s.useState(""),m=o=>{u(o)};return e.jsxs(e.Fragment,{children:[e.jsx(g,{onClick:()=>r(!0),color:"primary",children:"Add Note"}),e.jsxs(U,{show:c,size:"lg",onClose:()=>r(!1),children:[e.jsx(P,{children:"Add New Note"}),e.jsx(q,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{rows:5,value:l,onChange:o=>p(o.target.value),id:"description",className:"w-full form-control-textarea"}),e.jsx("h6",{className:"text-base pt-4",children:"Change Note Color"}),e.jsx("div",{className:"flex gap-2 items-center",children:a?a.map(o=>e.jsx("div",{className:`h-7 w-7 flex justify-center items-center rounded-full cursor-pointer  bg-${o.disp}`,onClick:()=>m(o.disp),children:d===o.disp?e.jsx(S,{width:"18",className:"text-white"}):null},o.disp)):""})]})}),e.jsxs(H,{children:[e.jsx(g,{color:"primary",disabled:l==="",onClick:o=>{o.preventDefault(),n({title:l,color:d}),r(!1),p("")},children:"Save"}),e.jsx(g,{color:"lighterror",onClick:()=>r(!1),children:"Close"})]})]})]})},V=()=>{const{notes:a,updateNote:n,selectedNoteId:c}=s.useContext(C),r=a.find(i=>i.id===c),[d,u]=s.useState(""),[l,p]=s.useState(""),[m,o]=s.useState(!1);s.useEffect(()=>{r&&(u(r.title),p(r.title))},[r]);const t=i=>{p(i.target.value),o(!0)},h=i=>{n(c,m?l:d,i)},x=()=>{o(!1),n(c,l,r.color)},v=[{id:1,lineColor:"warning",disp:"warning"},{id:2,lineColor:"primary",disp:"primary"},{id:3,lineColor:"error",disp:"error"},{id:4,lineColor:"success",disp:"success"},{id:5,lineColor:"secondary",disp:"secondary"}];return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex grow p-6",children:r?e.jsxs("div",{className:"w-full",children:[e.jsx(k,{id:"outlined-multiline-static",placeholder:"Edit Note",rows:5,value:m?l:d,onChange:t,className:"w-full p-6 form-control-textarea",onBlur:x}),e.jsx("br",{}),e.jsx("h6",{className:"text-base mb-3",children:"Change Note Color"}),e.jsx("div",{className:"flex gap-2 items-center",children:v.map(i=>e.jsx("div",{className:`h-7 w-7 flex justify-center items-center rounded-full cursor-pointer  bg-${i?.disp}`,onClick:()=>h(i.disp),children:r.color===i.disp?e.jsx(S,{width:"18",className:"text-white"}):null},i.id))})]}):e.jsx("div",{className:"text-center w-full py-6 text-2xl text-darklink dark:text-bodytext",children:"Select a Note"})})})},X=()=>{const[a,n]=s.useState(!1),c=()=>n(!1),r=[{id:1,lineColor:"warning",disp:"warning"},{id:2,lineColor:"primary",disp:"primary"},{id:3,lineColor:"error",disp:"error"},{id:4,lineColor:"success",disp:"success"},{id:5,lineColor:"secondary",disp:"secondary"}];return e.jsx(e.Fragment,{children:e.jsx(G,{children:e.jsx(F,{className:"p-0 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{children:e.jsx(R,{open:a,onClose:c,className:"lg:relative lg:translate-none dark:bg-dark lg:h-auto lg:bg-transparent lg:z-0",children:e.jsx(K,{})})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-ld py-4 px-6",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx(g,{color:"lightprimary",onClick:()=>n(!0),className:"btn-circle p-0 lg:hidden flex",children:e.jsx(y,{icon:"solar:hamburger-menu-outline",height:18})}),e.jsx("h6",{className:"text-base",children:" Edit Note"})]}),e.jsx(Q,{colors:r})]}),e.jsx(V,{})]})]})})})})},Y=[{to:"/",title:"Home"},{title:"Notes"}],ge=()=>e.jsxs(e.Fragment,{children:[e.jsx(W,{title:"Notes app",items:Y}),e.jsx(X,{})]});export{ge as default};
