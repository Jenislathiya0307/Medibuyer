import{r as Me,R as _e,j as l}from"./index-n5lagw8Y.js";import{C as Ne}from"./CardBox-DP5V6wyZ.js";import{B as w}from"./Button-BChG-RMT.js";import{L as Re}from"./ListGroup-yR1pndfF.js";import{L as Se}from"./ListItem-BjEHoo27.js";import{B as Pe}from"./BreadcrumbComp-BUvza-Rs.js";import"./resolve-theme-BrLp9Ogr.js";import"./theme-C-QQaxRv.js";import"./chevron-right-icon-BGQVsHY5.js";class J{constructor(e,r){this.operator=e,this.value=r,Object.defineProperty(this,"t",{writable:!0})}get notes(){return this.t}addNote(e){this.t=this.t||[],this.t.push(e)}}let F=class extends J{};class y extends F{constructor(e,r){if(!Array.isArray(r))throw new Error(`"${e}" operator expects to receive an array of conditions`);super(e,r)}}const p="__itself__";let g=class extends J{constructor(e,r,s){super(e,s),this.field=r}};const V=new F("__null__",null),O=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function ke(t,e){return e instanceof y&&e.operator===t}function G(t,e){return e.length===1?e[0]:new y(t,(function r(s,n,i){const o=i||[];for(let a=0,c=n.length;a<c;a++){const u=n[a];ke(s,u)?r(s,u.value,o):o.push(u)}return o})(t,e))}const qe=t=>t,H=()=>Object.create(null),W=Object.defineProperty(H(),"__@type@__",{value:"ignore value"});function Ie(t,e,r=!1){if(!t||t&&t.constructor!==Object)return!1;for(const s in t)if(O(t,s)&&O(e,s)&&(!r||t[s]!==W))return!0;return!1}function Te(t){const e=[];for(const r in t)O(t,r)&&t[r]!==W&&e.push(r);return e}function j(t,e){e!==V&&t.push(e)}const K=t=>G("and",t),Q={compound(t,e,r){const s=(Array.isArray(e)?e:[e]).map(n=>r.parse(n));return new y(t.name,s)},field:(t,e,r)=>new g(t.name,r.field,e),document:(t,e)=>new F(t.name,e)};let Be=class{constructor(e,r=H()){this.o=void 0,this.s=void 0,this.i=void 0,this.u=void 0,this.h=void 0,this.parse=this.parse.bind(this),this.u={operatorToConditionName:r.operatorToConditionName||qe,defaultOperatorName:r.defaultOperatorName||"eq",mergeFinalConditions:r.mergeFinalConditions||K},this.o=Object.keys(e).reduce((s,n)=>(s[n]=Object.assign({name:this.u.operatorToConditionName(n)},e[n]),s),{}),this.s=Object.assign({},r.fieldContext,{field:"",query:{},parse:this.parse,hasOperators:s=>Ie(s,this.o,r.useIgnoreValue)}),this.i=Object.assign({},r.documentContext,{parse:this.parse,query:{}}),this.h=r.useIgnoreValue?Te:Object.keys}setParse(e){this.parse=e,this.s.parse=e,this.i.parse=e}parseField(e,r,s,n){const i=this.o[r];if(!i)throw new Error(`Unsupported operator "${r}"`);if(i.type!=="field")throw new Error(`Unexpected ${i.type} operator "${r}" at field level`);return this.s.field=e,this.s.query=n,this.parseInstruction(i,s,this.s)}parseInstruction(e,r,s){return typeof e.validate=="function"&&e.validate(e,r),(e.parse||Q[e.type])(e,r,s)}parseFieldOperators(e,r){const s=[],n=this.h(r);for(let i=0,o=n.length;i<o;i++){const a=n[i];if(!this.o[a])throw new Error(`Field query for "${e}" may contain only operators or a plain object as a value`);j(s,this.parseField(e,a,r[a],r))}return s}parse(e){const r=[],s=this.h(e);this.i.query=e;for(let n=0,i=s.length;n<i;n++){const o=s[n],a=e[o],c=this.o[o];if(c){if(c.type!=="document"&&c.type!=="compound")throw new Error(`Cannot use parsing instruction for operator "${o}" in "document" context as it is supposed to be used in  "${c.type}" context`);j(r,this.parseInstruction(c,a,this.i))}else this.s.hasOperators(a)?r.push(...this.parseFieldOperators(o,a)):j(r,this.parseField(o,this.u.defaultOperatorName,a,e))}return this.u.mergeFinalConditions(r)}};function A(t,e){const r=t[e];if(typeof r!="function")throw new Error(`Unable to interpret "${e}" condition. Did you forget to register interpreter for it?`);return r}function ze(t){return t.operator}function Ue(t,e){const r=e,s=r&&r.getInterpreterName||ze;let n;switch(r?r.numberOfArguments:0){case 1:n=o=>{const a=s(o,r);return A(t,a)(o,i)};break;case 3:n=(o,a,c)=>{const u=s(o,r);return A(t,u)(o,a,c,i)};break;default:n=(o,a)=>{const c=s(o,r);return A(t,c)(o,a,i)}}const i=Object.assign({},r,{interpret:n});return i.interpret}function De(t,e){return(r,...s)=>{const n=t(r,...s),i=e.bind(null,n);return i.ast=n,i}}function X(t,e){if(!Array.isArray(e))throw new Error(`"${t.name}" expects value to be an array`)}function Z(t,e){if(X(t,e),!e.length)throw new Error(`"${t.name}" expects to have at least one element in array`)}const M=t=>(e,r)=>{if(typeof r!==t)throw new Error(`"${e.name}" expects value to be a "${t}"`)},ee={type:"compound",validate:Z,parse(t,e,{parse:r}){const s=e.map(n=>r(n));return G(t.name,s)}},Le=ee,Ye={type:"compound",validate:Z},Je={type:"field",validate(t,e){if(!(e&&(e instanceof RegExp||e.constructor===Object)))throw new Error(`"${t.name}" expects to receive either regular expression or object of field operators`)},parse(t,e,r){const s=e instanceof RegExp?new g("regex",r.field,e):r.parse(e,r);return new y(t.name,[s])}},te={type:"field",validate(t,e){if(!e||e.constructor!==Object)throw new Error(`"${t.name}" expects to receive an object with nested query or field level operators`)},parse(t,e,{parse:r,field:s,hasOperators:n}){const i=n(e)?r(e,{field:p}):r(e);return new g(t.name,s,i)}},re={type:"field",validate:M("number")},$={type:"field",validate:X},se=$,ne=$,Ve={type:"field",validate(t,e){if(!Array.isArray(e)||e.length!==2)throw new Error(`"${t.name}" expects an array with 2 numeric elements`)}},ie={type:"field",validate:M("boolean")},_={type:"field",validate:function(t,e){if(!(typeof e=="string"||typeof e=="number"||e instanceof Date))throw new Error(`"${t.name}" expects value to be comparable (i.e., string, number or date)`)}},b=_,oe=b,ae=b,N={type:"field"},ce=N,le={type:"field",validate(t,e){if(!(e instanceof RegExp)&&typeof e!="string")throw new Error(`"${t.name}" expects value to be a regular expression or a string that represents regular expression`)},parse(t,e,r){const s=typeof e=="string"?new RegExp(e,r.query.$options||""):e;return new g(t.name,r.field,s)}},ue={type:"field",parse:()=>V},Ge={type:"document",validate:M("function")};var He=Object.freeze({__proto__:null,$and:ee,$or:Le,$nor:Ye,$not:Je,$elemMatch:te,$size:re,$in:$,$nin:se,$all:ne,$mod:Ve,$exists:ie,$gte:_,$gt:b,$lt:oe,$lte:ae,$eq:N,$ne:ce,$regex:le,$options:ue,$where:Ge});let We=class extends Be{constructor(e){super(e,{defaultOperatorName:"$eq",operatorToConditionName:r=>r.slice(1)})}parse(e,r){return r&&r.field?K(this.parseFieldOperators(r.field,e)):super.parse(e)}};const E=He;function R(t,e,r){for(let s=0,n=t.length;s<n;s++)if(r(t[s],e)===0)return!0;return!1}function S(t,e){return Array.isArray(t)&&Number.isNaN(Number(e))}function I(t,e,r){if(!S(t,e))return r(t,e);let s=[];for(let n=0;n<t.length;n++){const i=r(t[n],e);i!==void 0&&(s=s.concat(i))}return s}function h(t){return(e,r,s)=>{const n=s.get(r,e.field);return Array.isArray(n)?n.some(i=>t(e,i,s)):t(e,n,s)}}const Ke=(t,e)=>t[e];function he(t,e,r){const s=e.lastIndexOf(".");return s===-1?[t,e]:[r(t,e.slice(0,s)),e.slice(s+1)]}function Qe(t,e,r=Ke){if(e===p)return t;if(!t)throw new Error(`Unable to get field "${e}" out of ${String(t)}.`);return(function(s,n,i){if(n.indexOf(".")===-1)return I(s,n,i);const o=n.split(".");let a=s;for(let c=0,u=o.length;c<u;c++)if(a=I(a,o[c],i),!a||typeof a!="object")return a;return a})(t,e,r)}function pe(t,e){return t===e?0:t>e?1:-1}function fe(t,e={}){return Ue(t,Object.assign({get:Qe,compare:pe},e))}const de=(t,e,{interpret:r})=>t.value.some(s=>r(s,e)),Xe=(t,e,r)=>!de(t,e,r),me=(t,e,{interpret:r})=>t.value.every(s=>r(s,e)),Ze=(t,e,{interpret:r})=>!r(t.value[0],e),P=(t,e,{compare:r,get:s})=>{const n=s(e,t.field);return Array.isArray(n)&&!Array.isArray(t.value)?R(n,t.value,r):r(n,t.value)===0},ye=(t,e,r)=>!P(t,e,r),ge=h((t,e,r)=>{const s=r.compare(e,t.value);return s===0||s===-1}),$e=h((t,e,r)=>r.compare(e,t.value)===-1),be=h((t,e,r)=>r.compare(e,t.value)===1),ve=h((t,e,r)=>{const s=r.compare(e,t.value);return s===0||s===1}),xe=(t,e,{get:r})=>{if(t.field===p)return e!==void 0;const[s,n]=he(e,t.field,r),i=o=>o==null?!!o===t.value:o.hasOwnProperty(n)===t.value;return S(s,n)?s.some(i):i(s)},et=h((t,e)=>typeof e=="number"&&e%t.value[0]===t.value[1]),we=(t,e,{get:r})=>{const[s,n]=he(e,t.field,r),i=o=>{const a=r(o,n);return Array.isArray(a)&&a.length===t.value};return t.field!==p&&S(s,n)?s.some(i):i(s)},je=h((t,e)=>typeof e=="string"&&t.value.test(e)),v=h((t,e,{compare:r})=>R(t.value,e,r)),Ae=(t,e,r)=>!v(t,e,r),Oe=(t,e,{compare:r,get:s})=>{const n=s(e,t.field);return Array.isArray(n)&&t.value.every(i=>R(n,i,r))},Ee=(t,e,{interpret:r,get:s})=>{const n=s(e,t.field);return Array.isArray(n)&&n.some(i=>r(t.value,i))},tt=(t,e)=>t.value.call(e);var rt=Object.freeze({__proto__:null,or:de,nor:Xe,and:me,not:Ze,eq:P,ne:ye,lte:ge,lt:$e,gt:be,gte:ve,exists:xe,mod:et,size:we,regex:je,within:v,nin:Ae,all:Oe,elemMatch:Ee,where:tt});const k=Object.assign({},rt,{in:v});fe(k);function T(t){return t===null||typeof t!="object"?t:t instanceof Date?t.getTime():t&&typeof t.toJSON=="function"?t.toJSON():t}const st=(t,e)=>pe(T(t),T(e));function q(t,e,r){const s=new We(t),n=fe(e,Object.assign({compare:st},r));if(r&&r.forPrimitives){const i={field:p},o=s.parse;s.setParse(a=>o(a,i))}return De(s.parse,n)}q(E,k);q(["$and","$or"].reduce((t,e)=>(t[e]=Object.assign({},t[e],{type:"field"}),t),Object.assign({},E,{$nor:Object.assign({},E.$nor,{type:"field",parse:Q.compound})})),k,{forPrimitives:!0});function C(t){return Array.isArray(t)?t:[t]}const B="__caslSubjectType__",m=t=>{const e=typeof t;return e==="string"||e==="function"},nt=t=>t.modelName||t.name;function Ce(t){return Object.hasOwn(t,B)?t[B]:nt(t.constructor)}const z={function:t=>t.constructor,string:Ce};function U(t,e,r){for(let s=r;s<e.length;s++)t.push(e[s])}function D(t,e){if(!t||!t.length)return e||[];if(!e||!e.length)return t||[];let r=0,s=0;const n=[];for(;r<t.length&&s<e.length;)t[r].priority<e[s].priority?(n.push(t[r]),r++):(n.push(e[s]),s++);return U(n,t,r),U(n,e,s),n}function f(t,e,r){let s=t.get(e);return s||(s=r(),t.set(e,s)),s}const it=t=>t;function ot(t,e){if(Array.isArray(t.fields)&&!t.fields.length)throw new Error("`rawRule.fields` cannot be an empty array. https://bit.ly/390miLa");if(t.fields&&!e.fieldMatcher)throw new Error('You need to pass "fieldMatcher" option in order to restrict access by fields');if(t.conditions&&!e.conditionsMatcher)throw new Error('You need to pass "conditionsMatcher" option in order to restrict access by conditions')}class at{constructor(e,r,s=0){ot(e,r),this.action=r.resolveAction(e.action),this.subject=e.subject,this.inverted=!!e.inverted,this.conditions=e.conditions,this.reason=e.reason,this.origin=e,this.fields=e.fields?C(e.fields):void 0,this.priority=s,this.t=r}i(){return this.conditions&&!this.o&&(this.o=this.t.conditionsMatcher(this.conditions)),this.o}get ast(){const e=this.i();return e?e.ast:void 0}matchesConditions(e){return this.conditions?!e||m(e)?!this.inverted:this.i()(e):!0}matchesField(e){return this.fields?e?(this.u||(this.u=this.t.fieldMatcher(this.fields)),this.u(e)):!this.inverted:!0}}function ct(t,e){const r={value:t,prev:e,next:null};return e&&(e.next=r),r}function lt(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t.next=t.prev=null}const ut=t=>({value:t.value,prev:t.prev,next:t.next}),L=()=>({rules:[],merged:!1}),Y=()=>new Map;class ht{constructor(e=[],r={}){this.h=!1,this.l=new Map,this.p={conditionsMatcher:r.conditionsMatcher,fieldMatcher:r.fieldMatcher,resolveAction:r.resolveAction||it},this.$=r.anyAction||"manage",this.A=r.anySubjectType||"all",this.m=e,this.M=!!r.detectSubjectType,this.j=r.detectSubjectType||Ce,this.v(e)}get rules(){return this.m}detectSubjectType(e){return m(e)?e:e?this.j(e):this.A}update(e){const r={rules:e,ability:this,target:this};return this._("update",r),this.m=e,this.v(e),this._("updated",r),this}v(e){const r=new Map;let s;for(let n=e.length-1;n>=0;n--){const i=e.length-n-1,o=new at(e[n],this.p,i),a=C(o.action),c=C(o.subject||this.A);!this.h&&o.fields&&(this.h=!0);for(let u=0;u<c.length;u++){const Fe=f(r,c[u],Y);s===void 0&&(s=typeof c[u]),typeof c[u]!==s&&s!=="mixed"&&(s="mixed");for(let x=0;x<a.length;x++)f(Fe,a[x],L).rules.push(o)}}if(this.l=r,s!=="mixed"&&!this.M){const n=z[s]||z.string;this.j=n}}possibleRulesFor(e,r=this.A){if(!m(r))throw new Error('"possibleRulesFor" accepts only subject types (i.e., string or class) as the 2nd parameter');const s=f(this.l,r,Y),n=f(s,e,L);if(n.merged)return n.rules;const i=e!==this.$&&s.has(this.$)?s.get(this.$).rules:void 0;let o=D(n.rules,i);return r!==this.A&&(o=D(o,this.possibleRulesFor(e,this.A))),n.rules=o,n.merged=!0,o}rulesFor(e,r,s){const n=this.possibleRulesFor(e,r);if(s&&typeof s!="string")throw new Error("The 3rd, `field` parameter is expected to be a string. See https://stalniy.github.io/casl/en/api/casl-ability#can-of-pure-ability for details");return this.h?n.filter((i=>i.matchesField(s))):n}actionsFor(e){if(!m(e))throw new Error('"actionsFor" accepts only subject types (i.e., string or class) as a parameter');const r=new Set,s=this.l.get(e);s&&Array.from(s.keys()).forEach((i=>r.add(i)));const n=e!==this.A?this.l.get(this.A):void 0;return n&&Array.from(n.keys()).forEach((i=>r.add(i))),Array.from(r)}on(e,r){this.F=this.F||new Map;const s=this.F,n=s.get(e)||null,i=ct(r,n);return s.set(e,i),()=>{const o=s.get(e);!i.next&&!i.prev&&o===i?s.delete(e):i===o&&s.set(e,i.prev),lt(i)}}_(e,r){if(!this.F)return;let s=this.F.get(e)||null;for(;s!==null;){const n=s.prev?ut(s.prev):null;s.value(r),s=n}}}class pt extends ht{can(e,r,s){const n=this.relevantRuleFor(e,r,s);return!!n&&!n.inverted}relevantRuleFor(e,r,s){const n=this.detectSubjectType(r),i=this.rulesFor(e,n,s);for(let o=0,a=i.length;o<a;o++)if(i[o].matchesConditions(r))return i[o];return null}cannot(e,r,s){return!this.can(e,r,s)}}const ft={$eq:N,$ne:ce,$lt:oe,$lte:ae,$gt:b,$gte:_,$in:$,$nin:se,$all:ne,$size:re,$regex:le,$options:ue,$elemMatch:te,$exists:ie},dt={eq:P,ne:ye,lt:$e,lte:ge,gt:be,gte:ve,in:v,nin:Ae,all:Oe,size:we,regex:je,elemMatch:Ee,exists:xe,and:me},mt=q(ft,dt),yt=/[-/\\^$+?.()|[\]{}]/g,gt=/\.?\*+\.?/g,$t=/\*+/,bt=/\./g;function vt(t,e,r){const s=r[0]==="*"||t[0]==="."&&t[t.length-1]==="."?"+":"*",n=t.indexOf("**")===-1?"[^.]":".",i=t.replace(bt,"\\$&").replace($t,n+s);return e+t.length===r.length?`(?:${i})?`:i}function xt(t,e,r){return t==="."&&(r[e-1]==="*"||r[e+1]==="*")?t:`\\${t}`}function wt(t){const e=t.map((s=>s.replace(yt,xt).replace(gt,vt))),r=e.length>1?`(?:${e.join("|")})`:e[0];return new RegExp(`^${r}$`)}const jt=t=>{let e;return r=>(typeof e>"u"&&(e=t.every((s=>s.indexOf("*")===-1))?null:wt(t)),e===null?t.indexOf(r)!==-1:e.test(r))};function At(t=[],e={}){return new pt(t,Object.assign({conditionsMatcher:mt,fieldMatcher:jt},e))}function Ot(t){return t.prototype!==void 0&&typeof t.prototype.possibleRulesFor=="function"}class Et{constructor(e){this.O=e}because(e){return this.O.reason=e,this}}class Ct{constructor(e){this.rules=[],this.C=e,this.can=(r,s,n,i)=>this.R(r,s,n,i,!1),this.cannot=(r,s,n,i)=>this.R(r,s,n,i,!0),this.build=r=>Ot(this.C)?new this.C(this.rules,r):this.C(this.rules,r)}R(e,r,s,n,i){const o={action:e};return i&&(o.inverted=i),r&&(o.subject=r,Array.isArray(s)||typeof s=="string"?o.fields=s:typeof s<"u"&&(o.conditions=s),typeof n<"u"&&(o.conditions=n)),this.rules.push(o),new Et(o)}}function Ft(t,e){const r=new Ct(At),s=t(r.can,r.cannot);return s&&typeof s.then=="function"?s.then((()=>r.build(e))):r.build(e)}const Mt=()=>{};class _t extends Me.PureComponent{constructor(...e){super(...e),this.t=!1,this.i=null,this.o=Mt}componentWillUnmount(){this.o()}u(e){e!==this.i&&(this.o(),this.i=null,e&&(this.i=e,this.o=e.on("updated",(()=>this.forceUpdate()))))}get allowed(){return this.t}h(){const e=this.props,r=e.of||e.a||e.an||e.this||e.on,s=e.not?"cannot":"can";return e.ability[s](e.I||e.do,r,e.field)}render(){return this.u(this.props.ability),this.t=this.h(),this.props.passThrough||this.t?this.l():null}l(){const{children:e,ability:r}=this.props;return typeof e=="function"?e(this.t,r):e}}const Nt={CanEdit:{action:"Can-Edit",subject:"address"},CanDelete:{action:"Can-Delete",subject:"address"}},d={Admin:{permissions:["CanEdit","CanDelete"]},Manager:{permissions:["CanEdit"]},Subscriber:{permissions:[]}},Rt=[{city:"New York",street:"5684 Max Summit",type:"address"},{city:"Manhatten York",street:"5684 Max Summit",type:"address"},{city:"Canada street York",street:"5684 Max Summit",type:"address"},{city:"Delhi street",street:"5684 Max Summit",type:"address"},{city:"UP Chawk",street:"5684 Max Summit",type:"address"}],St=()=>{const[t,e]=_e.useState(Object.keys(d)[0]),r=d[t].permissions.map(i=>Nt[i]),s=[...r.reduce((i,{action:o})=>(i.add(o),i),new Set)],n=Ft(i=>{r.forEach(({action:o,subject:a})=>{i(o,a)})});return l.jsx(l.Fragment,{children:l.jsxs(Ne,{children:[l.jsx("div",{className:"flex gap-2",children:Object.entries(d).map(([i])=>l.jsx(l.Fragment,{children:t!==i?l.jsx(w,{color:"outlineprimary",onClick:()=>e(i),children:i},i):l.jsx(w,{color:"primary",onClick:()=>e(i),children:i},i)}))}),l.jsx("div",{className:"bg-lightprimary dark:bg-lightprimary p-4 rounded-md my-2",children:d[t].permissions.map(i=>l.jsx("h5",{className:"text-sm opacity-80",children:i},i))}),l.jsx(Re,{className:"border-0 dark:bg-transparent p-2",children:Rt.map(({city:i,street:o,type:a})=>l.jsx(Se,{className:"mb-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-bodytext font-normal",children:[i,", ",o]}),s.map(c=>l.jsx(_t,{I:c,a,ability:n,children:l.jsx(w,{color:"lightprimary",size:"xs",children:c})},c))]})},i))})]})})},Pt=[{to:"/",title:"Home"},{title:"CASL"}],Ht=()=>l.jsxs(l.Fragment,{children:[l.jsx(Pe,{title:"Rollbase Access",items:Pt}),l.jsx(St,{})]});export{Ht as default};
